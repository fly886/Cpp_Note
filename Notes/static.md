static详解

1. 修饰函数内部的普通变量

   作用：

   - 延长生命周期：普通局部变量存活在函数调用期间，函数返回后销毁；static局部变量存活在程序运行期间，程序结束后销毁。
   - 保持值：普通局部变量每次调用函数都会重新创建；static局部变量只会创建一次（第一次创建若未显示赋值，则默认初始化为0），并且值保持为上次创建的值。
   - 作用域：都是局部。

2. 修饰定义在文件顶层的全局变量

   作用：

   - 改变链接属性为internal linkage，只能在本文件中访问，不能被extern引用
   - 生命周期仍是整个程序运行期间

3. 修饰普通函数（非成员函数）

   作用：

   - 改变链接属性为internal linkage，只能在本文件中访问，不能被extern调用
   - 避免与其他文件的同名函数冲突

4. 修饰类的成员变量

   作用：

   - 属于类本身，而不是某个对象
   - 所有此类定义出的对象共享这一个变量（一份数据）
   - 不依赖对象，可以通过类名调用，也可以通过对象调用
   - 必须在类外面初始化
   - 生命周期贯穿整个程序

5. 修饰类的成员函数

   作用：

   - 属于类本身，而不是某个对象
   - 不依赖对象，可以通过类名调用，也可以通过对象调用
   - 不能访问非静态成员变量/函数（因为没有 this）
   - 常用于工具函数、工厂函数		

| 本质作用                               | 描述                                            |
| -------------------------------------- | ----------------------------------------------- |
| **① 生命周期延长**                     | 局部变量变成静态存储（整个程序存在）            |
| **② 链接属性改变（internal linkage）** | 文件作用域的 static 使变量/函数只能在本文件使用 |
| **③ 对象归属改变**                     | 类的 static 成员属于类本身，而不是具体对象      |